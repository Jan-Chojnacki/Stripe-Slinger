raid-simulator-runtime-image:
  stage: bootstrap
  resource_group: raid-simulator-runtime-image
  image: docker:25
  services:
    - name: docker:25-dind
      command: ["--tls=false"]
  before_script: []
  variables:
    DOCKER_HOST: tcp://docker:2375
    DOCKER_TLS_CERTDIR: ""
    RUNTIME_IMAGE_REPO: "$CI_REGISTRY_IMAGE/rust-runtime"
    RUNTIME_BASE_IMAGE: "rust:${CI_RUST_VERSION}"
  script:
    - .gitlab/ci/shared/scripts/build-rust-runtime-image.sh
  rules:
    - !reference [.rules-runtime-image, rules]

metrics-gateway-runtime-image:
  stage: bootstrap
  resource_group: metrics-gateway-runtime-image
  image: docker:25
  services:
    - name: docker:25-dind
      command: ["--tls=false"]
  before_script: []
  variables:
    DOCKER_HOST: tcp://docker:2375
    DOCKER_TLS_CERTDIR: ""
    GO_RUNTIME_IMAGE_REPO: "$CI_REGISTRY_IMAGE/golang-runtime"
    GO_RUNTIME_BASE_IMAGE: "golang:${CI_GO_VERSION}"
  script:
    - .gitlab/ci/shared/scripts/build-golang-runtime-image.sh
  rules:
    - !reference [.rules-go-runtime-image, rules]
